title: LINUX VI 文件编辑器
id: 308
categories:
  - 软件工具
date: 2009-12-24 17:15:55
tags:
---

原文网址：[http://blog.csdn.net/tlpower/archive/2009/08/19/4461950.aspx](http://blog.csdn.net/tlpower/archive/2009/08/19/4461950.aspx)
</br>1、关于文本编辑器；
</br>文本编辑器有很多，比如图形模式的gedit、kwrite、OpenOffice ... ... ，文本模式下的编辑器有vi、vim（vi的增强版本）和nano ... ... vi和vim是我们在Linux中最常用的编辑器。我们有必要介绍一下vi（vim）最简单的用法，以让Linux入门级用户在最短的时间内学会使用它。
</br>nano 工具和DOS操作系统下的edit操作相似，使用简单，我们不作介绍了，如果您有兴趣，不妨尝试一下；
</br>2、vi 编辑器；
</br>为什么要学会简单应用vi
</br>vi或vim是Linux最基本的文本编辑工具，vi或vim虽然没有图形界面编辑器那样点鼠标的简单操作，但vi编辑器在系统管理、服务器管理中，永远不是图形界面的编辑器能比的。当您没有安装X-windows桌面环境或桌面环境崩溃时，我们仍需要字符模式下的编辑器vi；
</br>vi或vim 编辑器在创建和编辑简单文档最高效的工具；
</br>3、vi 编辑器的使用方法；
</br>&nbsp;
</br>3.1 如何调用vi ；
</br>[root@localhost ~]# vi filename
</br>~
</br>~
</br>~
</br>~
</br>~
</br>~
</br>~
</br>~
</br>3.2 vi 的三种命令模式；
</br>Command（命令）模式，用于输入命令；
</br>Insert（插入）模式，用于插入文本；
</br>Visual（可视）模式，用于视化的的高亮并选定正文；
</br>3.3 文件的保存和退出；
</br>Command 模式是vi或vim的默认模式，如果我们处于其它命令模式时，要通过ESC键切换过来。
</br>当我们按ESC键后，接着再输入:号时，vi会在屏幕的最下方等待我们输入命令；
</br>:w 保存；
</br>:w filename 另存为filename；
</br>:wq! 保存退出；
</br>:wq! filename 注：以filename为文件名保存后退出；
</br>:q! 不保存退出；
</br>:x 应该是保存并退出 ，功能和:wq!相同
</br>3.4 光标移动；
</br>当我们按ESC进入Command模式后，我们可以用下面的一些键位来移动光标；
</br>j 向下移动一行；
</br>k 向上移动一行；
</br>h 向左移动一个字符；
</br>l 向右移动一个字符；
</br>ctrl+b 向上移动一屏；
</br>ctrl+f 向下移动一屏；
</br>向上箭头&nbsp;&nbsp;&nbsp; 向上移动；
</br>向下箭头&nbsp;&nbsp;&nbsp; 向下移动；
</br>向左箭头&nbsp;&nbsp;&nbsp; 向左移动；
</br>向右箭头&nbsp;&nbsp;&nbsp; 向右移动；
</br>我们编辑一个文件时，对于 j、k、l和h键，还能在这些动作命令的前面加上数字，比如 3j，表示向下移动3行。
</br>3.5 插入模式（文本的插入）；
</br>i 在光标之前插入；
</br>a 在光标之后插入；
</br>I 在光标所在行的行首插入；
</br>A 在光标所在行的行末插入；
</br>o 在光标所在的行的上面插入一行；
</br>O 在光标所在的行的下面插入一行；
</br>s 删除光标后的一个字符，然后进入插入模式；
</br>S 删除光标所在的行，然后进入插入模式；
</br>3.6 文本内容的删除操作；
</br>x 一个字符；
</br>#x 删除几个字符，#表示数字，比如3x；
</br>dw 删除一个单词；
</br>#dw 删除几个单词，#用数字表示，比如3dw表示删除三个单词；
</br>dd 删除一行；
</br>#dd 删除多个行，#代表数字，比如3dd 表示删除光标行及光标的下两行；
</br>d$ 删除光标到行尾的内容；
</br>J 清除光标所处的行与上一行之间的空格，把光标行和上一行接在一起；
</br>3.7 恢复修改及恢复删除操作；
</br>u 撤消修改或删除操作；
</br>按ESC键返回Command（命令）模式，然后按u键来撤消删除以前的删除或修改；如果您想撤消多个以前的修改或删除操作，请按多按几次u。这和Word的撤消操作没有太大的区别；
</br>3.8 可视模式；
</br>在最新的Linux发行版本中，vi提供了可视模式，因为这个功能是vim才有的。如果您用的vi没有这个功能，就换成vim就有了。打开可视模式，按ESC键，然后按v就进入可视模式；
</br>可视模式为我们提供了极为友好的选取文本范围，以高亮显示；在屏幕的最下方显示有；
</br>-- 可视 --&nbsp;&nbsp;
</br>或
</br>--VISUAL--
</br>如图：
</br>&nbsp;
</br>进入可视模式，我们就可以用前面所说的命令行模式中的光标移动指令，可以进行文本范围的选取。
</br>选取文本范围有何用？
</br>我们可以对某部份删除作业，按d键就删除了我们选中的内容。
</br>选中内容后，我们按y就表示复制；按d表示删除；
</br>值得一提是的删除的同时，也表示复制。我们返回到命令模式，然后移动光标到某个位置，然后按shift+p键，就把刚才删除的内容贴上了。我们先在这里提一句，在后文，我们还得详细说说。
</br>退出可视模式，还是用ESC键；
</br>3.9 复制和粘帖的操作；
</br>其实删除也带有剪切的意思，当我们删除文字时，可以把光标移动到某处，然后按shift+p键就把内容贴在原处，然后再移动光标到某处，然后再按p或shift+p又能贴上；
</br>p 在光标之后粘帖；
</br>shift+p 在光标之前粘帖
</br>来举一例：
</br>比如我们想把一个文档的第三行复制下来，然后帖到第五行的后面，我们应该怎么做呢？
</br>有两种方法；
</br>第一种方法：
</br>先把第三行删除，把光标移动到第三行处，然后用dd动作，接着再按一下shift+p键。这样就把刚才删除的第三行帖在原处了。
</br>接着我们再用k键移动光标到第五行，然后再按一下p键，这样就把第三行的内容又帖到第五行的后面了；
</br>第二种方法；
</br>进入可视模式，按ESC键，然后按v键。移动鼠标指针，选中第三行的内容，然后按y键复制；再移动指针到第五行，最后按p键；
</br>所以复制和粘贴操作，是命令模式、插入模式及可视模式的综合运用；我们要学会各种模式之间的切换，要常用ESC键；更为重要的学会在命令模式下移动光标；
</br>3.10 关于行号；
</br>有时我们配置一个程序运行时，会出现配置文件X行出现错误 。这时我们要用到行号相关的操作；
</br>为所有内容添加行号；
</br>按ESC键，然后输入：
</br>:set number
</br>光标所处位置
</br>在屏幕的右下角，有类似如下的；
</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 57,8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 27%
</br>在这之中，57表示第57行，8表示第8个字符；
</br>3.11 查找和替换功能；
</br>&nbsp;
</br>3.11.1 查找；
</br>首先，我们要进入ESC键，进入命令模式；我们输入/或?就进入查找模式了；
</br>/SEARCH 注：正向查找，按n键把光标移动到下一个符合条件的地方；
</br>?SEARCH 注：反向查找，按shift+n 键，把光标移动到下一个符合条件的
</br>举一例：比如我想在一个文件中找到swap单词，我应该如下做；
</br>首先按ESC键，进入命令模式，然后输入；
</br>/swap
</br>或
</br>?swap
</br>3.11.2 替换；
</br>按ESC键进入命令模式；
</br>:s /SEARCH/REPLACE/g 注：把当前光标所处的行中的SEARCH单词，替换成REPLACE，并把所有SEARCH高亮显示；
</br>:%s /SEARCH/REPLACE 注：把文档中所有SEARCH替换成REPLACE；
</br>:#,# s /SEARCH/REPLACE/g 注：＃号表示数字，表示从多少行到多少行，把SEARCH替换成REPLACE；
</br>注：在这之中，g表示全局查找；我们注意到，就是没有替换的地方，也会把SEARCH高亮显示；
</br>举例说明：
</br>比如我们有一篇文档要修改；
</br>我们把光标所在的行，把所有单词the，替换成THE，应该是：
</br>:s /the/THE/g
</br>我们把整篇文档的所有的the都替换成THE，应该是：
</br>:%s /the/THE
</br>我们仅仅是把第1行到第10行中的the，替换成THE，应该是；
</br>:1,10 s /the/THE/g
</br>4、关于本文；
</br>我写本文的目的是让新手在最短的时间内用vi或vim创建、编辑和修改文件，所以说这篇文档并不是大而全的vi手册。如果把vi所有的功能都说全了，至少得写一本千页的手册；本也没有涉及更为高级的vi用法。如果想了解的更多，请查找man和help；
</br>[aspx](http://blog.csdn.net/tlpower/archive/2009/08/19/4461950.aspx)